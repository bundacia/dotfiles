#!/usr/bin/env ruby

delims = ARGV
input  = STDIN.read.split("\n")

# Modifies line in place so that the first
# instance of delim on each line are vertically aligned.
def align(delim, lines)
  max_position = -1
  indent       = lines.first.match(/^\s*/)[0]
  continue     = true

  line_info = lines.map do |line|
    if continue and line.match(/^#{indent}[^\s]/)
      position     = line.index(delim)
      max_position = [position, max_position].max if position
    else
      continue = false
    end
    [ line, position ]
  end
  
  line_info.each do |line, position|
    next unless position
    pad = ' ' * (max_position - position)
    line[delim] = delim == ':' ? delim + pad : pad + delim
  end

end

# For each delim loop through the input and align
delims.each { |delim| align(delim.strip, input) }

puts input
